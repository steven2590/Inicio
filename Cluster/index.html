<html>
<head>
  <meta charset=utf-8 />
  <title>Clustering points</title>
  <meta charset="utf-8">
  <!-- Define the versions of IE that will be used to render the page. See Microsoft documentation for details. Optional. -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <!-- End Responsive -->
  <!-- Use protocol relative urls that way if the browser is viewing the page via HTTPS the js/css file will be requested using the HTTPS protocol -->

  <!-- Load Leaflet from CDN-->
  <link rel="stylesheet" href="//js.arcgis.com/3.8/js/esri/css/esri.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300"  type="text/css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/leaflet/1.0.0-rc.3/leaflet.css" />  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/leaflet.esri.geocoder/2.1.1/esri-leaflet-geocoder.css">    
  <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/Leaflet/Leaflet.markercluster/v1.0.0-beta.2.0/dist/MarkerCluster.Default.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/Leaflet/Leaflet.markercluster/v1.0.0-beta.2.0/dist/MarkerCluster.css">
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href='css/modal.css'/>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/estilos.css">


  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
  
  <script src="https://cdn.jsdelivr.net/leaflet/1.0.0-rc.3/leaflet-src.js"></script>
  <script src="https://cdn.jsdelivr.net/leaflet.esri/2.0.2/esri-leaflet.js"></script>
  <script src="https://cdn.rawgit.com/Leaflet/Leaflet.markercluster/v1.0.0-beta.2.0/dist/leaflet.markercluster.js"></script>
  <script src="https://cdn.jsdelivr.net/leaflet.esri.clustered-feature-layer/2.0.0-beta.1/esri-leaflet-clustered-feature-layer.js"></script>  
  <script src="https://cdn.jsdelivr.net/leaflet.esri.geocoder/2.1.1/esri-leaflet-geocoder.js"></script>

  <script src="js/jquery.simplemodal.js" type="text/javascript"></script>   
  <script src="js/config.js" type="text/javascript"></script>
  <script src="js/modal.js" type="text/javascript" ></script>

  <style>
    body { margin:0; padding:0; }
    #viewMap { position: absolute; top:0; bottom:0; right:0; left:0; width: 100%; height: 100%;}
  </style>
</head>
<body class="claro app-loading">
  <div id="viewMap"></div>
  <script type="text/javascript">
      var package_path = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));
      var dojoConfig = {
        async: true,
            // The locationPath logic below may look confusing but all its doing is
            // enabling us to load the api from a CDN and load local modules from the correct location.
            packages: [{
              name: "application",
              location: package_path + '/js'
            }, {
              name: "config",
              location: package_path + '/config'
            }, {
              name: "arcgis_templates",
              location: package_path + '/..'
            }]
          };
  </script>
  <script type="text/javascript" src="//js.arcgis.com/3.8/"></script>
  <script type="text/javascript">
    try{
      require([
          "application/template",
          "application/main"
        ], function(
          Template,
          Main
      ){
          // create the template. This will take care of all the logic required for template applications
          var myTemplate = new Template({});
          // create my main application. Start placing your logic in the main.js file.
          var myApp = new Main();
          // start template
          myTemplate.startup().then(function(config) {
              // The config object contains the following properties: helper services, (optionally)
              // i18n, appid, webmap and any custom values defined by the application.
              // In this example we have one called theme.
            myApp.startup(config);
          }, function(error) {
            // something went wrong. Let's report it.
            myApp.reportError(error);
          });
      });
    } catch (e) {
        Rollbar.error("Problem trying to create the template", e);
    }
  </script>
  <!-- preload the images -->
  <div style='display:none'>
    <img src='images/x.png' alt='' />
  </div>

</body>
</html>